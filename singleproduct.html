<!DOCTYPE html>
<html>
<head lang="en">
    <meta http-equiv="x-ua-compatible" content="IE=EmulateIE9" >
    <meta http-equiv="x-ua-compatible" content="IE=EmulateIE8" >
    <meta http-equiv="x-ua-compatible" content="IE=EmulateIE7" >
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <meta charset="UTF-8">
    <title>单个产品详情</title>
    <link rel="stylesheet" href="css/base.css"/>
    <link rel="stylesheet" href="css/header.css"/>
    <link rel="stylesheet" href="css/singleproduct.css"/>
    <link rel="stylesheet" href="css/footer.css"/>


    <script type="text/javascript" src="js/jquery-3.2.1.js"></script>
    <script type="text/javascript" src="js/base.js"></script>
</head>
<body>
    <!-- 导航栏部分-->
    <div id="header"></div>


    <!-- 主体部分-->
    <div class="single">
        <!-- 标题-->
        <div class="location">
            <div class="location_list">
                <span class="location_one">首页/</span>
                <span class="location_two">风前云间的晴空</span>
            </div>
        </div>

        <!-- 放大镜部分-->
        <div class="single_all">
            <div class="single_list">
                <div class="single_left">
                    <div class="single_left_top">
                        <!-- 小遮罩层-->
                        <div class="mask"></div>
                        <div class="top_middle">
                            <img src="img/lg/1.jpg" alt=""/>
                        </div>
                        <div class="top_big">
                            <!--<img src="img/lg/1.jpg" alt=""/>-->
                        </div>
                    </div>
                    <div class="single_left_bottom">
                        <div class="jiantou" data-arrow="lf">
                            <img src="img/1541492713(1).png" alt=""/>
                        </div>
                        <div class="img_list">
                            <ul>
                                <li>
                                    <div class="li_img">
                                        <img class="li_show" src="img/sm/1.jpg" alt=""/>
                                    </div>
                                </li>
                                <li>
                                    <div class="li_img">
                                        <img src="img/sm/2.jpg" alt=""/>
                                    </div>
                                </li>
                                <li>
                                    <div class="li_img">
                                        <img src="img/sm/3.jpg" alt=""/>
                                    </div>
                                </li>
                                <li>
                                    <div class="li_img">
                                        <img src="img/sm/1.jpg" alt=""/>
                                    </div>
                                </li>
                                <li>
                                    <div class="li_img">
                                        <img src="img/sm/2.jpg" alt=""/>
                                    </div>
                                </li>
                                <li>
                                    <div class="li_img">
                                        <img src="img/sm/3.jpg" alt=""/>
                                    </div>
                                </li>
                                <li>
                                    <div class="li_img">
                                        <img src="img/sm/1.jpg" alt=""/>
                                    </div>
                                </li>
                                <li>
                                    <div class="li_img">
                                        <img src="img/sm/2.jpg" alt=""/>
                                    </div>
                                </li>
                            </ul>
                        </div>
                        <div class="jiantou" data-arrow="rg">
                            <img src="img/1541492737(1).png" alt=""/>
                        </div>
                    </div>
                </div>
                <div class="single_right">
                    <div class="single_right_top">
                        <h5>风前云间的晴空</h5>
                        <div class="single_price">
                            ￥<span data-item="price">130.00</span>
                            ￥<span class="original">150.00</span>
                            ￥<span data-item="total_price">0.00</span>
                        </div>
                        <p>库存数:<span>20</span>件</p>
                        <p>
                            Lorem Ipsum的段落有很多变体，但大多数都经历了某种形式的改变，
                            比如注入幽默，或者是一些看起来一点都不可信的随机词。
                        </p>
                    </div>
                    <div class="single_right_bottom">
                        <div class="bottom_li">
                            <p>尺寸:</p>
                            <span class="active1">L</span>
                            <span>M</span>
                            <span>S</span>
                        </div>
                        <div class="bottom_li bottom_li2">
                            <p>颜色:</p>
                            <span class="span_one active2"></span>
                            <span class="span_two"></span>
                            <span class="span_three"></span>
                        </div>
                        <div class="bottom_li">
                            <p>材料:</p>
                            <span class="active1">塑胶</span>
                            <span>玻璃杯</span>
                            <span>竹篮</span>
                        </div>
                        <div class="amount">
                            <div class="amount_input">
                                数量:
                                <input data-btn="count" type="text" value="0"/>
                            </div>
                            <div class="amount_btn">
                                <button>加入购物车</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 选项卡部分-->
        <div class="tab_control">
            <div class="tab_title">
                <ul>
                    <li class="span_show">
                        产品描述
                    </li>
                    <li>
                        产品评论
                    </li>
                    <li>
                        本店政策
                    </li>
                </ul>
            </div>
            <div class="tab_list">
                <div class="tab_item tab_item_show">
                    <p>
                        与人们普遍认为的相反，Lorem Ipsum并不是简单的随机文本。
                        它起源于公元前45年的古典拉丁文学，距今已有2000多年的历史。
                        理查德·麦克林托克是弗吉尼亚州汉普顿-悉尼学院的拉丁语教授，
                        他从洛伦·伊普苏姆的一段文字中查阅了拉丁文中较为晦涩的一个词
                        “奉献”，并查阅了古典文学中这个词的引用，发现了毋庸置疑的出处。
                        Lorem Ipsum来自于西塞罗于公元前45年写的
                        《de Finibus Bonorum and Malorum》(极端善恶)的第1.10.32和1.10.33节。
                        这本书是一篇论文
                    </p>
                    <p>
                        以下是自16世纪以来使用的Lorem Ipsum的标准数据。
                        西塞罗(Cicero)的《Bonorum和Malorum》
                        (de Finibus Bonorum et Malorum)中第1.10.32和1.10.33节
                        也以完全原汁原味的形式被复制，还有H. Rackham在1914年翻译的英文版。
                    </p>
                </div>
                <div class="tab_item">
                    <div class="reviews">
                        <h5>顾客评论</h5>
                        <span>还没有评论</span>
                        <span class="reviews_span">去写一条评论</span>

                        <form class="form1" action="#" method="get">
                            <textarea placeholder="说点什么吧!" name="" id="" cols="50" rows="10" maxlength="200"></textarea>
                            <button type="submit">提交</button>
                        </form>
                    </div>
                </div>
                <div class="tab_item">
                    <h5 class="tab_h5">我们店的运输政策</h5>
                    <p>
                        与人们普遍认为的相反，Lorem Ipsum并不是简单的随机文本。
                        它起源于公元前45年的古典拉丁文学，距今已有2000多年的历史。
                        理查德·麦克林托克是弗吉尼亚州汉普顿-悉尼学院的拉丁语教授，
                        他从洛伦·伊普苏姆的一段文字中查阅了拉丁文中较为晦涩的一个词
                    </p>
                    <div class="p_one">
                        <p>1-2个工作日(通常在工作日结束时)</p>
                        <p>30天退款保证</p>
                        <p>24/7现场支持</p>
                        <p>奥迪奥·迪尼西姆(Odio Dignissim)说了这句话</p>
                        <p>我要为你们祈祷</p>
                    </div>
                    <p>
                        与人们普遍认为的相反，Lorem Ipsum并不是简单的随机文本。
                        它起源于公元前45年的古典拉丁文学，距今已有2000多年的历史。
                        理查德·麦克林托克是弗吉尼亚州汉普顿-悉尼学院的拉丁语教授，
                        他从洛伦·伊普苏姆的一段文字中查阅了拉丁文中较为晦涩的一个词
                    </p>
                    <p>
                        与人们普遍认为的相反，Lorem Ipsum并不是简单的随机文本。
                        它起源于公元前45年的古典拉丁文学，距今已有2000多年的历史。
                    </p>
                    <p>
                        与人们普遍认为的相反，Lorem Ipsum并不是简单的随机文本。
                        它起源于公元前45年的古典拉丁文学，距今已有2000多年的历史。
                    </p>
                </div>
            </div>
        </div>
    </div>


    <!-- 底部部分-->
    <div id="footer"></div>
</body>


<script type="text/javascript">
    $(function(){
        /************鼠标移入中图片实现放大镜效果******************/
        var mask = $(".mask");
        //var superMask = $(".top_middle");
        var lgPic = $(".top_big");
        var width = 100;            //小遮罩层的宽度
        var superWidth=$(".top_middle").width();
        var maskWidth=$(".mask").width();
        console.log(maskWidth);
        console.log(superWidth);
        $(".top_middle").mouseover(          //给大遮罩层绑定鼠标移入移出事件
                function(){
                    mask.show();          //鼠标移入小遮罩层显示，移出隐藏
                    lgPic.show();         //鼠标移入大图片显示，移出隐藏
                }
        );
        $(".top_middle").mouseout(function(){
            mask.hide();
            lgPic.hide();
        })
        $(".top_middle").mousemove(function(e){
            var x = e.offsetX-width;      //获取相对于事件元素左上角的x轴位置
            var y = e.offsetY-width;      //获取相对于事件元素左上角的y轴位置
            x = x<0?0:x>(superWidth-maskWidth)?(superWidth-maskWidth):x;          //大遮罩层为460px，小遮罩层为200px，460-200=260px
            y = y<0?0:y>(superWidth-maskWidth)?(superWidth-maskWidth):y;
            mask[0].style.left=x+"px";
            mask[0].style.top=y+"px";
            lgPic.css("backgroundPosition",`${-x}px ${-y}px`);     //修改大图背景图片的定位

        })

        //在小于1201px屏幕下，清除放大镜点击效果
        //定义变量获取屏幕视口宽度
        var windowWidth = $(window).width();
        if(windowWidth <1201){
            $(".top_middle").mouseover(          //给大遮罩层绑定鼠标移入移出事件
                    function(){
                        mask.hide();          //鼠标移入小遮罩层显示，移出隐藏
                        lgPic.hide();         //鼠标移入大图片显示，移出隐藏
                    }
            );
        }





        /*******小图片列表横向滚动**********/
        let moved = 0;           //设置移动的初始化步数为0
        let liWidth=$(".img_list>ul>li").width();
        $("[data-arrow=lf]").click(function(){
            if(moved<0){                       //只有移动步数小于0时才能向左移动
                moved+=1;                       //向左移动一次，移动步数加1
                $(".img_list>ul").animate({
                    left:liWidth*moved
                })
                $("[data-arrow=rg]").removeClass("disable"); //移除右箭头的禁用样式
                if(moved>=0) {
                    $(this).addClass("disable");    //左箭头增加禁用样式
                }
            }
        })
        $("[data-arrow=rg]").click(function(){
            //只有移动步数大于图片列表减4的取反值，才能向右移动，以保证移动到最后一张图不再向右移动
            if(moved>-($(".img_list>ul>li").length-4)){
                moved-=1;                      //向右移动一次，移动步数减1
                $(".img_list>ul").animate({
                    left:liWidth*moved
                })
                $("[data-arrow=lf]").removeClass("disable");    //移除左箭头的禁用样式
                if(moved<=-($(".img_list>ul>li").length-4)){
                    $(this).addClass("disable");            //右箭头增加禁用样式
                }
            }
        })

        /******鼠标点击小图片切换中图片********/
        $(".img_list>ul>li").click(function(){
            let src = $(this).find(".li_img>img").attr("src");          //获取小图片的src地址
            src = src.replace("sm","md");                       //将文件夹名sm更换为md
            $(".top_middle>img").attr("src",src);               //将中图片的src地址替换为变量src
            src = src.replace("md","lg");                       //将文件夹名md更换为lg
            //$(".top_big>img").attr("src",src);
            $(".top_big").css("background",`url(./${src})`);
            // 将大图片的背景图地址替换为变量src
        })

        //放大镜部分点击显示高亮部分
        $(".img_list>ul>li").each(function(index){
            $(this).on("click",function(){
                $(".li_img>img").removeClass("li_show")
                $(".li_img>img").eq(index).addClass("li_show")
            });
        });







        //选项卡部分点击显示高亮部分效果
        $(".bottom_li>span").each(function(i){
           $(this).on("click",function(){
               //console.log(i);
               $(".bottom_li>span").eq(i).addClass("active1")
                       .siblings(".bottom_li>span").removeClass("active1");
           })
        });

        $(".bottom_li2>span").each(function(i){
            $(this).on("click",function(){
                $(".bottom_li2>span").eq(i).addClass("active2")
                        .siblings(".bottom_li2>span").removeClass("active2");
            })
        });



        //加数量，减数量部分功能
        let $pro_num = $("[data-btn=count]");//单项商品数量
        let $total_price=$("[data-item=total_price]");//获取小计元素数组
        let $price = $("[data-item=price]");//获取单价的数组


        $("[data-btn=count]").each(function(i){
            let $count=$($pro_num.get(i));//获取当前input元素
            let $price_total = $($total_price.get(i));//获取当前价格小计元素
            let price= parseInt($($price.get(i)).text());//获取当前商品单价,并取整
            let num = parseInt($($pro_num.get(i)).val());//获取当前数量输入框中的数量

            //给数量输入框绑定键盘事件
            $count.keyup(function(e){
                if(isNaN($count.val())){            //判断是否是输入非数字
                    alert("只能输入阿拉伯数字");
                    $count.val(num); //当输入非数字时，强制将输入框的值修改为num
                }else if($count.val() > 20){
                    alert("已超过最大购买数量");
                    $count.val(num);
                }else if($count.val() == 0){
                    $count.val(0);
                }
                num = parseInt($(e.target).val());       //更新当前商品数量
                $price_total.text(`${parseFloat(num*price).toFixed(2)}`);
            })

        })


        //点击写评论下拉效果
        $(".reviews_span").click(function(){
            $(".form1").toggleClass("form1_show")
        })
        //选项卡点击显示高亮
        $(".tab_title>ul>li").each(function(index){
            $(this).on("click",function(){
                $(".tab_title>ul>li").eq(index).addClass("span_show")
                        .siblings().removeClass("span_show");


                //选项卡显示
                $(".tab_item").eq(index).addClass("tab_item_show")
                        .siblings().removeClass("tab_item_show");
            })
        });
    })
</script>
</html>














